<div class="widget-container">
  <div class="widget-header">
    <h3><i class="material-icons widget-icon">pie_chart</i> Books by Author</h3>
    <span class="widget-subtitle">Distribution across authors</span>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading author statistics...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button class="btn btn-retry" (click)="loadAuthorData()">Retry</button>
  </div>

  <div *ngIf="!loading && !error" class="chart-container">
    <canvas #chartCanvas></canvas>
  </div>

  <div *ngIf="!loading && !error" class="stats-summary">
    <div class="stat-item" *ngFor="let author of authorCounts.slice(0, 3)">
      <span class="author-name">
        <i class="material-icons author-icon">person</i>
        {{ author.author }}
      </span>
      <span class="book-count">{{ author.bookCount }} book{{ author.bookCount !== 1 ? 's' : '' }}</span>
    </div>
  </div>
</div>